<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×”×™×¡×˜×•×¨×™×™×ª ×”×˜×™×¤×•×œ×™× ×©×œ×™</title>

    <!-- âœ… ×§×™×©×•×¨ ×œ×¢×™×¦×•×‘ -->
    <link rel="stylesheet" href="{{ url_for('static', filename='3D.css') }}">
</head>
<body class="booking-page">

    <!-- âœ… ×›×•×ª×¨×ª -->
    <div class="page-header">
        ×”×™×¡×˜×•×¨×™×™×ª ×”×˜×™×¤×•×œ×™× ×©×œ×™
    </div>

    <main>
        <!-- ğŸ”¹ ×ª×•×¨×™× ×¢×ª×™×“×™×™× ×¢× ××¤×©×¨×•×ª ×œ×¢×“×›×Ÿ ×•×œ×‘×˜×œ -->
        <section>
            <h2>×ª×•×¨×™× ×¢×ª×™×“×™×™×</h2>
            {% if future_appointments %}
                <ul class="appointments-list">
                    {% for appointment in future_appointments %}
                        <li>
                            <strong>{{ appointment.doctor_name }}</strong> - {{ appointment.treatment_type }} <br>
                            {{ appointment.appointment_date }} ×‘×©×¢×” {{ appointment.appointment_time }}
                            <form action="{{ url_for('update_appointment_route', appointment_id=appointment._id) }}" method="POST" style="display:inline;">
                                <input type="date" name="appointmentDate" class="update-date" required>
                                <input type="time" name="appointmentTime" required>
                                <button type="submit" class="update-btn">×¢×“×›×Ÿ</button>
                            </form>
                            <form action="{{ url_for('cancel_appointment_route', appointment_id=appointment._id) }}" method="POST" style="display:inline;">
                                <button type="submit" class="cancel-btn">×‘×™×˜×•×œ</button>
                            </form>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>××™×Ÿ ×œ×š ×ª×•×¨×™× ×¢×ª×™×“×™×™×.</p>
            {% endif %}
        </section>

        <!-- ğŸ”¹ ×”×™×¡×˜×•×¨×™×™×ª ×˜×™×¤×•×œ×™× ×§×•×“××™× -->
        <section>
            <h2>×ª×•×¨×™× ×§×•×“××™×</h2>
            {% if past_appointments %}
                <ul class="appointments-list">
                    {% for appointment in past_appointments %}
                        <li>
                            <strong>{{ appointment.doctor_name }}</strong> - {{ appointment.treatment_type }} <br>
                            {{ appointment.appointment_date }} ×‘×©×¢×” {{ appointment.appointment_time }}
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>××™×Ÿ ×œ×š ×ª×•×¨×™× ×§×•×“××™×.</p>
            {% endif %}
        </section>

        <div class="button-group">
            <a href="{{ url_for('personal_page') }}" class="back-btn">×—×–×¨×” ×œ××–×•×¨ ×”××™×©×™</a>
        </div>
    </main>

    <!-- âœ… ×× ×™×¢×ª ×¢×“×›×•×Ÿ ×ª×•×¨ ×œ×ª××¨×™×š ×©×›×‘×¨ ×¢×‘×¨ -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const today = new Date().toISOString().split('T')[0];

            // ×”×’×‘×œ×ª ×›×œ ×©×“×•×ª ×”×ª××¨×™×š ×œ×¢×“×›×•×Ÿ ×›×š ×©×œ× × ×™×ª×Ÿ ×™×”×™×” ×œ×‘×—×•×¨ ×ª××¨×™×š ×©×¢×‘×¨
            document.querySelectorAll('.update-date').forEach(dateInput => {
                dateInput.setAttribute('min', today);
            });
        });
    </script>

</body>
</html>
